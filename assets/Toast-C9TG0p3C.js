import{j as e,A as y,m as l}from"./framer-motion-CfqgSJVN.js";import{r as m}from"./react-vendor-CC-NPt3m.js";import{X as g,T as b,P as v,c as j,d as w}from"./ui-vendor-DsSFL4s6.js";import{u as C,k}from"./index-CE03Jwbf.js";const A=({isOpen:t,mediaSrc:i,type:c,caption:d,onClose:x})=>{const o=c==="video"||i&&(i.endsWith(".mp4")||i.startsWith("data:video")),n=m.useRef(null);return m.useEffect(()=>{if(!t||!o)return;const r=()=>{document.hidden?n.current&&!n.current.paused?(n.current.pause(),sessionStorage.setItem("was_video_playing","true")):sessionStorage.setItem("was_video_playing","false"):sessionStorage.getItem("was_video_playing")==="true"&&n.current&&n.current.play().catch(h=>console.log("Video resume failed:",h))};return document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)}},[t,o]),e.jsx(y,{children:t&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,style:u.overlay,children:e.jsxs(l.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:r=>r.stopPropagation(),style:u.content,children:[e.jsx("button",{onClick:x,style:u.closeButton,children:e.jsx(g,{size:24})}),o?e.jsx("video",{ref:n,src:i,controls:!0,autoPlay:!0,style:u.media}):e.jsx("img",{src:i,alt:d||"Full screen view",style:u.media}),d&&e.jsx("div",{style:u.caption,children:d})]})})})},u={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"2rem"},content:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},media:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},closeButton:{position:"absolute",top:"-40px",right:0,background:"none",border:"none",color:"#fff",cursor:"pointer",padding:"0.5rem",zIndex:10},caption:{marginTop:"1rem",color:"#fff",fontSize:"1.1rem",textAlign:"center",fontFamily:"Playfair Display, serif"}},I={hidden:{opacity:0},visible:{opacity:1}},S={hidden:{scale:.8,opacity:0,y:50},visible:{scale:1,opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{scale:.8,opacity:0,y:50,transition:{duration:.2}}},H=({isOpen:t,onClose:i,onSave:c,initialCaption:d="",title:x="Add Caption"})=>{const[o,n]=m.useState(d);m.useEffect(()=>{t&&n(d)},[t,d]);const r=a=>{a.preventDefault(),c(o),i()};return e.jsx(y,{children:t&&e.jsx(l.div,{variants:I,initial:"hidden",animate:"visible",exit:"hidden",style:p.backdrop,onClick:i,children:e.jsxs(l.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",style:p.modal,onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{style:p.header,children:[e.jsx("h2",{style:p.title,children:x}),e.jsx("button",{onClick:i,style:p.closeBtn,children:e.jsx(g,{size:20})})]}),e.jsxs("form",{onSubmit:r,style:p.form,children:[e.jsx("input",{type:"text",value:o,onChange:a=>n(a.target.value),placeholder:"Enter a beautiful caption...",style:p.input,autoFocus:!0}),e.jsxs("div",{style:p.actions,children:[e.jsx("button",{type:"button",onClick:i,style:p.cancelBtn,children:"Cancel"}),e.jsx("button",{type:"submit",style:p.saveBtn,children:"Save"})]})]})]})})})},p={backdrop:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},modal:{width:"100%",maxWidth:"500px",backgroundColor:"rgba(20, 20, 20, 0.95)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",padding:"2rem",overflow:"hidden"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},title:{fontSize:"1.5rem",color:"#d4af37",fontFamily:"Playfair Display, serif",margin:0},closeBtn:{background:"none",border:"none",color:"#888",cursor:"pointer",padding:"0.5rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},form:{display:"flex",flexDirection:"column",gap:"2rem"},input:{width:"100%",padding:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#fff",fontSize:"1.1rem",outline:"none",transition:"border-color 0.2s"},actions:{display:"flex",justifyContent:"flex-end",gap:"1rem"},cancelBtn:{padding:"0.8rem 1.5rem",backgroundColor:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ccc",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s"},saveBtn:{padding:"0.8rem 2rem",backgroundColor:"#d4af37",border:"none",borderRadius:"8px",color:"#000",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(212, 175, 55, 0.3)",transition:"all 0.2s"}},z={hidden:{opacity:0},visible:{opacity:1}},B={hidden:{scale:.9,opacity:0,y:20},visible:{scale:1,opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{scale:.9,opacity:0,y:20}},T=({isOpen:t,title:i,message:c,onConfirm:d,onCancel:x,confirmText:o="Confirm",cancelText:n="Cancel",isDangerous:r=!1})=>e.jsx(y,{children:t&&e.jsx(l.div,{variants:z,initial:"hidden",animate:"visible",exit:"hidden",style:f.backdrop,onClick:x,children:e.jsxs(l.div,{variants:B,initial:"hidden",animate:"visible",exit:"exit",style:f.modal,onClick:a=>a.stopPropagation(),children:[e.jsx("div",{style:f.iconContainer,children:e.jsx(b,{size:32,color:r?"#ff4444":"#d4af37"})}),e.jsx("h3",{style:f.title,children:i}),e.jsx("p",{style:f.message,children:c}),e.jsxs("div",{style:f.actions,children:[e.jsx("button",{onClick:x,style:f.cancelBtn,children:n}),e.jsx("button",{onClick:d,style:{...f.confirmBtn,backgroundColor:r?"rgba(255, 68, 68, 0.1)":"rgba(212, 175, 55, 0.1)",color:r?"#ff4444":"#d4af37",borderColor:r?"#ff4444":"#d4af37"},children:o})]})]})})}),f={backdrop:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},modal:{width:"100%",maxWidth:"400px",backgroundColor:"#1a1a1a",borderRadius:"16px",border:"1px solid rgba(212, 175, 55, 0.2)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},iconContainer:{marginBottom:"1.5rem",padding:"1rem",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.05)"},title:{margin:"0 0 0.5rem 0",fontSize:"1.5rem",color:"#fff",fontFamily:"Playfair Display, serif"},message:{margin:"0 0 2rem 0",color:"#ccc",fontSize:"1rem",lineHeight:"1.5"},actions:{display:"flex",gap:"1rem",width:"100%"},cancelBtn:{flex:1,padding:"0.8rem",backgroundColor:"transparent",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#888",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s"},confirmBtn:{flex:1,padding:"0.8rem",border:"1px solid",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.2s"}},M=({item:t,type:i,onClick:c,onEdit:d,onDelete:x})=>{const[o,n]=m.useState(!1),{playSfx:r}=C();return e.jsxs(l.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:o?1.03:1,y:o?-5:0},onHoverStart:()=>!window.matchMedia("(pointer: coarse)").matches&&n(!0),onHoverEnd:()=>!window.matchMedia("(pointer: coarse)").matches&&n(!1),onClick:()=>{window.matchMedia("(pointer: coarse)").matches&&!o?n(!0):(r(k),c&&c(t))},style:s.container,children:[e.jsxs("div",{style:s.mediaWrapper,children:[i==="video"?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:t.url,poster:t.thumbnail,style:s.media,muted:!0,playsInline:!0}),e.jsx("div",{style:s.playOverlay,children:e.jsx(v,{size:40,fill:"rgba(255,255,255,0.8)",color:"transparent"})})]}):e.jsx("img",{src:t.url,alt:t.caption,style:{...s.media,objectPosition:t.position||"50% 20%",transform:t.scale?`scale(${t.scale})`:"scale(1)",filter:"contrast(1.05) saturate(1.1)"}}),e.jsx("div",{style:s.overlay}),e.jsx(l.div,{style:s.glowOverlay,animate:{opacity:o?1:0},transition:{duration:.3}})]}),e.jsxs("div",{style:s.footer,children:[e.jsx(l.div,{style:s.captionContainer,animate:{x:o?-20:0,paddingRight:o?"60px":"0px"},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx("span",{style:s.caption,children:t.caption})}),e.jsx(y,{children:o&&e.jsxs(l.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:20,opacity:0},transition:{type:"spring",stiffness:400,damping:25},style:s.actions,children:[e.jsx(l.button,{whileHover:{scale:1.2,color:"#d4af37"},whileTap:{scale:.9},onClick:a=>{a.stopPropagation(),d(a,t)},style:s.actionBtn,title:"Edit Caption",children:e.jsx(j,{size:16})}),e.jsx(l.button,{whileHover:{scale:1.2,color:"#ff4444"},whileTap:{scale:.9},onClick:a=>{a.stopPropagation(),x(a,t)},style:{...s.actionBtn,color:"#ff6b6b"},title:"Delete",children:e.jsx(w,{size:16})})]})})]})]})},s={container:{position:"relative",borderRadius:"16px",overflow:"hidden",backgroundColor:"#1a1a1a",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",cursor:"pointer",aspectRatio:"4/5",display:"flex",flexDirection:"column"},mediaWrapper:{position:"relative",flex:1,overflow:"hidden"},media:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.5s ease"},playOverlay:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.2)"},overlay:{position:"absolute",bottom:0,left:0,width:"100%",height:"50%",background:"linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%)",pointerEvents:"none"},glowOverlay:{position:"absolute",inset:0,background:"radial-gradient(circle at center, rgba(255, 255, 255, 0.15) 0%, transparent 70%)",pointerEvents:"none",zIndex:1},footer:{position:"absolute",bottom:0,left:0,width:"100%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},captionContainer:{width:"100%",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},caption:{color:"#fff",fontSize:"1rem",fontWeight:"500",textShadow:"0 2px 4px rgba(0,0,0,0.5)",fontFamily:"Outfit, sans-serif"},actions:{position:"absolute",right:"1rem",display:"flex",gap:"0.5rem",backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",padding:"0.4rem",borderRadius:"20px"},actionBtn:{background:"none",border:"none",color:"#ccc",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"}},R={listeners:[],subscribe(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(i=>i!==t)}},emit(t,i="success"){this.listeners.forEach(c=>c(t,i))}},V=(t,i="success")=>{R.emit(t,i)};export{H as C,A as I,M,T as a,V as s};
